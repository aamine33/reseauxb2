TP1 : Maîtrise réseau du votre poste

I. Basics

II. Go further

III. Le requin

I. Basics

☀️ Carte réseau WiFi
```
batman33@BATPC:~$ ifconfig
ether 34:c9:3d:22:bb:b8 (addresse mac)
inet 192.168.1.78 (addresse IP Carte WiFi)
netmask 255.255.255.0 (masque de sous-réseau en /24)
```

☀️ Déso pas déso

tool qui calcule tout: https://www.site24x7.com/fr/tools/ipv4-sous-reseau-calculatrice.html
```
Adresse réseau : 192.168.1.0
Adresse de broadcast : 192.168.1.255
Nombre d'adresses IP disponible : 254
```
☀️ Hostname

```
batman33@BATPC:~$ hostname
BATPC
```
☀️ Passerelle du réseau
```
- IP de la passerelle du réseau:

batman33@BATPC:~$ ip route
default via 192.168.1.1 dev wlo1 proto dhcp src 192.168.1.78 metric 600 
ou 
batman33@BATPC:~$ route -n
Table de routage IP du noyau
Destination     Passerelle      Genmask         Indic Metric Ref    Use Iface
0.0.0.0         192.168.1.1     0.0.0.0         UG    600    0        0 wlo1
- Adresse MAC de la passerelle du reseau : 

batman33@BATPC:~$ arp -a
_gateway (192.168.1.1) at cc:2d:1b:62:d0:b8 [ether] on wlo1

```
☀️ Serveur DHCP et DNS

```
- Adresse IP du server DNS :
batman33@BATPC:~$ cat /etc/resolv.conf 
# Generated by NetworkManager
nameserver 192.168.1.1
nameserver 2a02:842a:8731:af01::1

-Adresse IP du server DHCP :
journalctl -u NetworkManager | grep -i dhcp
(le résultat fait mal aux yeux)

```

☀️ Table de routage

```
batman33@BATPC:~$ ip route
default via 192.168.1.1 dev wlo1 proto dhcp src 192.168.1.78 metric 600 

```

II. Go further

☀️ Hosts ?

```
batman33@BATPC:~$ sudo nano /etc/hosts
( on y ajoute 1.1.1.1 suivi de b2.hello.vous)
batman33@BATPC:~$ ping b2.hello.vous
PING b2.hello.vous (1.1.1.1) 56(84) bytes of data.
64 bytes from b2.hello.vous (1.1.1.1): icmp_seq=1 ttl=56 time=20.2 ms
64 bytes from b2.hello.vous (1.1.1.1): icmp_seq=2 ttl=56 time=19.5 ms
64 bytes from b2.hello.vous (1.1.1.1): icmp_seq=3 ttl=56 time=17.2 ms
^C
--- b2.hello.vous ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2003ms
rtt min/avg/max/mdev = 17.184/18.954/20.179/1.282 ms

```
☀️ Go mater une vidéo youtube et déterminer, pendant qu'elle tourne...
```
batman33@BATPC:~$ sudo netstat -tnp | grep ESTABLISHED
Comme je ne pouvais pas tout fermer pour faire cette commande , en résultat on aurait forcément eu une adresse IP du style 172.x.x.x étant l'adresse IP du server, ensuite le port 443 car c'est souvent ce port à laquelle on est connecté , port étant HTTPS, et concernant le port local ca commencerait par du 54xxxx....
```

☀️ Requêtes DNS
```
- IP correspondant au nom de domaine www.thinkerview.com :
batman33@BATPC:~$ nslookup ynov.com
Server:		192.168.1.1
Address:	192.168.1.1#53

Non-authoritative answer:
Name:	ynov.com
Address: 172.67.74.226
Name:	ynov.com
Address: 104.26.10.233
Name:	ynov.com
Address: 104.26.11.233
Name:	ynov.com
Address: 2606:4700:20::ac43:4ae2
Name:	ynov.com
Address: 2606:4700:20::681a:be9
Name:	ynov.com
Address: 2606:4700:20::681a:ae9

- Nom de domaine correspondant à l'IP 143.90.88.12: 
batman33@BATPC:~$ nslookup 143.90.88.12
12.88.90.143.in-addr.arpa	name = EAOcf-140p12.ppp15.odn.ne.jp.

```
☀️ Hop hop hop

```
batman33@BATPC:~$ traceroute ynov.com
traceroute to ynov.com (104.26.11.233), 30 hops max, 60 byte packets
 1  _gateway (192.168.1.1)  1.367 ms  3.269 ms  3.387 ms
 2  * * *
 3  14.254.69.86.rev.sfr.net (86.69.254.14)  9.268 ms  9.935 ms  9.917 ms
 4  164.147.6.194.rev.sfr.net (194.6.147.164)  16.773 ms  16.755 ms  16.089 ms
 5  * * *
 6  * * *
 7  104.26.11.233 (104.26.11.233)  21.850 ms  18.789 ms  17.477 ms

```
☀️ IP publique

```
batman33@BATPC:~$ traceroute 8.8.8.8
(comme je ne suis pas à ynov, c'est la commande que j'aurai tapé)
```

III. Le requin
☀️ Capture ARP
```
- Pour vider la table arp et forcer un échange avec ARP :
batman33@BATPC:~$ sudo ip neigh flush all
(cf dossier Capture Wireshark : arp.pcapng)
```

☀️ Capture DNS
```
on exécute la commande nslookup ynov.com
(cf dossier Capture Wireshark : dns.pcapng)
```
☀️ Capture TCP
```
on va faire la commande curl ynov.com
(cf dossier Capture Wireshark : tcp.pcapng)
```